/* Theme Colors - Using Radix UI Color System
 * Sand: Base color for all elements
 * Red/Green/Blue: Reserved for special boxes (TBD)
 * Sources:
 * - Sand: https://cdn.jsdelivr.net/npm/@radix-ui/colors@latest/sand.css
 * - Red: https://cdn.jsdelivr.net/npm/@radix-ui/colors@latest/red.css
 * - Blue: https://cdn.jsdelivr.net/npm/@radix-ui/colors@latest/blue.css
 * - Green: https://cdn.jsdelivr.net/npm/@radix-ui/colors@latest/green.css
 * - Dark variants: 
 *   - Sand: https://cdn.jsdelivr.net/npm/@radix-ui/colors@latest/sand-dark.css
 *   - Red: https://cdn.jsdelivr.net/npm/@radix-ui/colors@latest/red-dark.css
 *   - Blue: https://cdn.jsdelivr.net/npm/@radix-ui/colors@latest/blue-dark.css
 *   - Green: https://cdn.jsdelivr.net/npm/@radix-ui/colors@latest/green-dark.css
 * 
 * COLOR USAGE GUIDELINES:
 * 1. ALL color definitions MUST be in this section only
 * 2. NEVER add new color definitions anywhere else in this file
 *    - ONLY use colors from the Radix color system defined above
 *    - NEVER add custom colors
 * 3. Colors are organized in two root blocks:
 *    - [data-theme="light"] for light mode colors
 *    - [data-theme="dark"] for dark mode colors
 * 4. Each block contains:
 *    - Base colors (Sand palette)
 *    - Accent colors (Red, Blue, Green)
 */

/* Light Mode Colors */
:root[data-theme="light"] {
    /* Base colors (Sand) */
    --sand-1: #fdfdfc;
    --sand-2: #f9f9f8;
    --sand-3: #f1f0ef;
    --sand-4: #e9e8e6;
    --sand-5: #e2e1de;
    --sand-6: #dad9d6;
    --sand-7: #cfceca;
    --sand-8: #bcbbb5;
    --sand-9: #8d8d86;
    --sand-10: #82827c;
    --sand-11: #63635e;
    --sand-12: #21201c;

    /* Accent colors */
    --red-9: #e5484d;
    --red-10: #dc3e42;
    --red-11: #ce2c31;
    --red-12: #641723;

    --blue-9: #0090ff;
    --blue-10: #0588f0;
    --blue-11: #0d74ce;
    --blue-12: #113264;

    --green-9: #30a46c;
    --green-10: #2b9a66;
    --green-11: #218358;
    --green-12: #193b2d;
}

/* Dark Mode Colors */
:root[data-theme="dark"] {
    /* Base colors (Sand) */
    --sand-1: #111110;
    --sand-2: #191918;
    --sand-3: #222221;
    --sand-4: #2a2a28;
    --sand-5: #31312e;
    --sand-6: #3b3a37;
    --sand-7: #494844;
    --sand-8: #62605b;
    --sand-9: #6f6d66;
    --sand-10: #7c7b74;
    --sand-11: #b5b3ad;
    --sand-12: #eeeeec;

    /* Accent colors */
    --red-9: #e5484d;
    --red-10: #ec5d5e;
    --red-11: #ff9592;
    --red-12: #ffd1d9;

    --blue-9: #0090ff;
    --blue-10: #3b9eff;
    --blue-11: #70b8ff;
    --blue-12: #c2e6ff;

    --green-9: #30a46c;
    --green-10: #33b074;
    --green-11: #3dd68c;
    --green-12: #b1f1cb;
}

/* Custom Properties */
:root {
    /* Layout */
    --side-nav-width: min(350px, 90vw);
    --content-max-width: 65ch;
    --spacing-xs: 0.25rem;
    --spacing-sm: 0.5rem;
    --spacing-md: 1rem;
    --spacing-lg: 1.5rem;
    --spacing-xl: 2rem;
    --spacing-xxl: 3rem;

    /* Typography */
    --font-serif: "Source Serif 4", Georgia, "Times New Roman", serif;
    --font-sans: "Source Sans 3", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    --font-size-base: 1rem;
    --line-height-base: 1.5;
    --line-height-heading: 1.2;
}

/* Font Usage Rules
 * 1. Default font is serif (--font-serif) for all text content
 * 2. Sans-serif (--font-sans) is used ONLY in:
 *    - Navigation elements (.side-nav)
 *    - Special boxes:
 *      - Legal boxes (.legal-box)
 *      - Explanatory boxes (.explanatory-box)
 *      - Disclaimer boxes (.disclaimer-box)
 *      - KPI boxes (.kpi-box)
 *      - Glossary elements (.glossary)
 *      - Recital elements (.recital-box)
 */

/* Modern CSS Reset */
*,
*::before,
*::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

html {
    font-size: 100%;
    text-size-adjust: none;
    -webkit-text-size-adjust: none;
}

body {
    min-height: 100vh;
    line-height: var(--line-height-base);
    font-family: var(--font-serif);
    font-size: var(--font-size-base);
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

/* Typography */

/* UI Elements - Sans-serif */
.side-nav *,
.legal-box *,
.explanatory-box *,
.disclaimer-box *,
.kpi-box *,
.glossary *,
.recital-box * {
    font-family: var(--font-sans);
}

h1,
h2,
h3,
h4,
h5 {
    font-family: var(--font-serif);
    line-height: var(--line-height-heading);
    color: inherit;
}

p {
    margin-bottom: 1rem;
    line-height: var(--line-height-base);
    max-width: var(--content-max-width);
}

a {
    color: inherit;
    text-decoration: underline;
    text-decoration-thickness: 1px;
    text-underline-offset: 0.2em;
    transition: color 0.2s ease;
}

a:hover {
    color: var(--sand-11);
}

strong {
    font-weight: 600;
}

/* Lists */
ul,
ol {
    margin-bottom: 1rem;
    padding-left: 1.5rem;
    max-width: var(--content-max-width);
}

li {
    margin-bottom: 0.5rem;
    line-height: var(--line-height-base);
}

dl {
    margin-bottom: 1rem;
    max-width: var(--content-max-width);
}

dt {
    font-weight: 600;
    margin-top: 1rem;
}

dd {
    margin-left: 0;
    margin-top: 0.5rem;
}

/* Dark mode link colors */
@media (prefers-color-scheme: dark) {
    a:hover {
        color: var(--sand-11);
    }
}

body.light-mode a:hover {
    color: var(--sand-11);
}

body.dark-mode a:hover {
    color: var(--sand-11);
}

/* Images and Media */
img,
picture,
video,
canvas,
svg {
    display: block;
    max-width: 100%;
}

/* Forms and Inputs */
input,
button,
textarea,
select {
    font: inherit;
}

/* Layout Base */
.side-nav {
    width: 100%;
    max-width: var(--side-nav-width);
    position: fixed;
    top: 0;
    right: 0;
    height: 100vh;
    background: var(--sand-1);
    border-left: 1px solid var(--sand-6);
    display: flex;
    flex-direction: column;
    z-index: 1000;
}

.main-content {
    width: 100%;
    max-width: var(--content-max-width);
    margin-inline: auto;
    padding-inline: var(--spacing-md);
}

/* Navigation Components */
/* Navigation Header */
.nav-header {
    padding: var(--spacing-md);
    border-bottom: 1px solid var(--sand-6);
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
}

.nav-header .box-icon {
    color: var(--sand-11);
}

/* Navigation Content */
.nav-content {
    flex: 1;
    overflow-y: auto;
    padding: var(--spacing-md);
}

.nav-content ul {
    list-style: none;
    padding: 0;
    margin: 0;
}

.nav-content li {
    margin: var(--spacing-xs) 0;
}

.nav-content a {
    display: block;
    padding: var(--spacing-xs) 0;
    color: inherit;
    text-decoration: none;
    transition: color 0.2s ease;
}

.nav-content a:hover {
    color: var(--sand-11);
}

.nav-content a.active {
    font-weight: 600;
}

/* Navigation Footer */
.nav-footer {
    padding: var(--spacing-md);
    border-top: 1px solid var(--sand-6);
}

/* Theme Control */
.theme-control {
    margin-bottom: var(--spacing-md);
}

.theme-select-wrapper {
    position: relative;
    margin-top: var(--spacing-xs);
}

.theme-select-wrapper select {
    width: 100%;
    padding: var(--spacing-xs) var(--spacing-sm);
    padding-right: var(--spacing-xl);
    border: 1px solid var(--sand-6);
    border-radius: 4px;
    background: var(--sand-1);
    color: inherit;
    appearance: none;
}

.theme-icon {
    position: absolute;
    right: var(--spacing-sm);
    top: 50%;
    transform: translateY(-50%);
    pointer-events: none;
    color: var(--sand-11);
    opacity: 0;
    transition: opacity 0.2s ease;
}

/* Show icon based on selected value */
select[value="system"]~.system-icon,
select[value="light"]~.light-icon,
select[value="dark"]~.dark-icon {
    opacity: 1;
}

/* Keyboard Shortcuts */
.keyboard-shortcuts {
    font-size: 0.9em;
}

.keyboard-shortcuts-header {
    margin-bottom: var(--spacing-sm);
}

.keyboard-shortcuts-header h4 {
    font-size: 1em;
    margin: 0;
}

.keyboard-shortcuts ul {
    list-style: none;
    padding: 0;
}

.keyboard-shortcuts li {
    margin-bottom: var(--spacing-xs);
    display: flex;
    gap: var(--spacing-sm);
}

.shortcut-btn {
    background: none;
    border: none;
    padding: var(--spacing-xs) var(--spacing-sm);
    color: inherit;
    font-size: 0.9em;
    cursor: pointer;
    border-radius: 4px;
    transition: background-color 0.2s ease;
}

.shortcut-btn:hover {
    background-color: var(--sand-3);
}

.shortcut-btn kbd {
    background: var(--sand-3);
    padding: 2px 6px;
    border-radius: 3px;
    font-size: 0.9em;
    font-family: var(--font-sans);
}

/* Navigation Toggle Button */
.nav-toggle {
    position: fixed;
    top: var(--spacing-md);
    right: var(--spacing-md);
    width: 2.5rem;
    height: 2.5rem;
    border: none;
    border-radius: 50%;
    background: var(--sand-1);
    color: inherit;
    cursor: pointer;
    z-index: 1001;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.2s ease;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.nav-toggle:hover {
    transform: scale(1.05);
}

.nav-toggle i {
    width: 1.5rem;
    height: 1.5rem;
    color: var(--sand-11);
}

/* Breakpoints are set in stone. NEVER add any other breakpoints in this file. */

/* Breakpoint: Mobile First (default) */
/* On mobile, content takes up full width and side navigation starts collapsed. */
.side-nav {
    transform: translateX(100%);
    transition: transform 0.3s ease;
    width: min(350px, 90vw);
}

.side-nav.is-open {
    transform: translateX(0);
}

/* Breakpoint: Tablet and up (≥768px) */
/* On tablet and up, the navigation is always visible and on the right side of the screen, content has a max width and is centered in the rest of the screen. */
@media screen and (min-width: 768px) {
    body {
        display: grid;
        grid-template-columns: 1fr var(--side-nav-width);
        gap: var(--spacing-xl);
    }

    .main-content {
        place-self: center start;
        width: min(var(--content-max-width), 100%);
        margin-inline: auto;
    }

    .side-nav {
        transform: translateX(0);
        width: var(--side-nav-width);
    }

    .nav-toggle {
        display: none;
    }
}

/* Breakpoint: Desktop (≥1280px) */
/* On desktop, the content has a max width and is centered in the rest of the screen. The nav is no longer on the right side of the screen, it now floats in the center, towards the right of the content. */
@media screen and (min-width: 1280px) {
    body {
        max-width: calc(var(--content-max-width) + var(--side-nav-width) + var(--spacing-xl));
        margin-inline: auto;
    }

    .side-nav {
        right: calc((100% - (var(--content-max-width) + var(--side-nav-width) + var(--spacing-xl))) / 2);
    }
}